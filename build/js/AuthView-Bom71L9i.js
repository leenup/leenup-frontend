import{d as _,g as l,h as V,q as M,s as z,v,T as k,w as D,o as u,c as h,x as g,n as B,a as s,t as I,l as S,_ as F,y as U,b as p,z as $,A as x,B as w,e as y,u as A}from"./index-D7hDrqer.js";import{_ as H}from"./BackButton.vue_vue_type_script_setup_true_lang-C--M5_E6.js";import{_ as N}from"./ProgressBar.vue_vue_type_script_setup_true_lang-HVJ__jhq.js";import{I as j}from"./IconCoucou-7zejncsR.js";import{I as q}from"./IconHome-CMQCrUQP.js";const E="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2048%2048'%20width='48px'%20height='48px'%3e%3cpath%20fill='%23FFC107'%20d='M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z'/%3e%3cpath%20fill='%23FF3D00'%20d='M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z'/%3e%3cpath%20fill='%234CAF50'%20d='M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z'/%3e%3cpath%20fill='%231976D2'%20d='M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z'/%3e%3c/svg%3e",L={class:"text-sm font-semibold"},G={class:"mt-2 h-1 w-full rounded-full bg-white/30 overflow-hidden"},P=_({__name:"Toast",props:{message:{},type:{default:"success"},duration:{default:5e3}},setup(c){const n=c,r=l(!0),i=l(Date.now()),d=V(()=>n.type==="error"?"bg-red-600":"bg-green-600");return M(t=>{r.value=!0,i.value=Date.now();const a=globalThis.setTimeout(()=>{r.value=!1},n.duration);t(()=>globalThis.clearTimeout(a))}),z(()=>n.message,()=>{r.value=!0,i.value=Date.now()}),(t,a)=>(u(),v(k,{name:"toast-slide"},{default:D(()=>[r.value?(u(),h("output",{key:0,class:B(["fixed bottom-4 right-4 z-50 min-w-[240px] max-w-sm rounded-300 px-4 py-3 shadow-e-300 text-white",d.value]),"aria-live":"polite"},[s("p",L,I(c.message),1),s("div",G,[(u(),h("div",{key:c.message+c.type,class:"h-full bg-white progress-bar",style:S({animationDuration:n.duration+"ms"})},null,4))])],2)):g("",!0)]),_:1}))}}),b=F(P,[["__scopeId","data-v-a65316c7"]]),R={class:"min-h-screen bg-surface-bg text-primary-600 px-6 py-10"},J={class:"mx-auto w-full max-w-3xl space-y-6"},K={class:"flex items-center gap-4"},O={class:"grid items-start gap-4 md:grid-cols-[auto,1fr]"},Q={class:"space-y-2"},W={type:"submit",class:"flex w-full items-center justify-center gap-3 rounded-400 bg-primary-600 px-6 py-3 text-base font-semibold text-surface-button shadow-e-300 transition hover:bg-primary-700"},te=_({__name:"AuthView",setup(c){const n=A(),r=U(),i=l(""),d=l(""),t=l(""),a=l("");let m;const C=o=>{if(!o)return"Une erreur est survenue. Merci de réessayer.";const e=o.toLowerCase();return e.includes("network")?"Connexion serveur impossible. Vérifie ta connexion ou réessaie plus tard.":e.includes("expired")||e.includes("jwt")?"Votre session a expiré, merci de vous reconnecter.":e.includes("invalid")||e.includes("bad credentials")?"Identifiants incorrects. Vérifiez votre email et votre mot de passe.":e.includes("unauthorized")?"Vous n’êtes pas autorisé. Merci de vous reconnecter.":o},T=async()=>{t.value="",a.value="",m&&(globalThis.clearTimeout(m),m=void 0);try{await r.authenticate({email:i.value,password:d.value}),await r.fetchProfile(),a.value="Connexion réussie",m=globalThis.setTimeout(()=>{n.push({name:"dashboard-leener"})},5e3)}catch(o){const e=o?.response?.data?.message||o?.response?.data?.error||o?.message;t.value=C(e)}};return(o,e)=>(u(),h("main",R,[s("div",J,[s("header",K,[p(H),p(N,{value:.8})]),s("section",O,[p(j,{class:"h-20 w-20 text-primary-600"}),e[2]||(e[2]=s("div",{class:"font-sans text rounded-400 bg-surface-panel px-4 py-3 text-primary-600 shadow-e-100"}," Un dernier clic et on part à l'aventure ensemble ! ",-1))]),e[5]||(e[5]=s("section",{class:"text-center space-y-2"},[s("h1",{class:"font-sans h2 font-bold"},"Lorem ipsum"),s("p",{class:"font-sans h3 text-primary-600"},"Lorem ipsum dolor sit amet, lorem ipsum.")],-1)),s("form",{class:"space-y-4",onSubmit:$(T,["prevent"])},[s("div",Q,[x(s("input",{"onUpdate:modelValue":e[0]||(e[0]=f=>i.value=f),type:"email",required:"",placeholder:"monadresse@mail.com",class:"w-full rounded-300 border border-secondary-300 bg-white px-4 py-3 text-primary-600 shadow-e-100 focus:border-cta-500 focus:outline-none focus:ring-2 focus:ring-cta-200"},null,512),[[w,i.value]]),x(s("input",{"onUpdate:modelValue":e[1]||(e[1]=f=>d.value=f),type:"password",required:"",placeholder:"Mot de passe",class:"w-full rounded-300 border border-secondary-300 bg-white px-4 py-3 text-primary-600 shadow-e-100 focus:border-cta-500 focus:outline-none focus:ring-2 focus:ring-cta-200"},null,512),[[w,d.value]])]),s("button",W,[p(q,{class:"h-5 w-5"}),e[3]||(e[3]=y(" Connexion avec e-mail ",-1))]),e[4]||(e[4]=s("button",{type:"button",class:"flex w-full items-center justify-center gap-3 rounded-400 bg-white px-6 py-3 text-base font-semibold text-primary-600 shadow-e-200 transition hover:bg-secondary-500"},[s("img",{src:E,alt:"Google",class:"h-5 w-5"}),y(" Connexion avec Google ")],-1))],32)]),t.value?(u(),v(b,{key:"err-"+t.value,message:t.value,type:"error"},null,8,["message"])):g("",!0),a.value?(u(),v(b,{key:"ok-"+a.value,message:a.value,type:"success"},null,8,["message"])):g("",!0)]))}});export{te as default};
