import{d as w,y as h,p as N,g as _,C as V,h as b,c as u,a as e,b as x,z as C,e as o,A as i,B as n,F as k,f as S,D as U,n as m,t as c,E as q,u as T,o as p}from"./index-D7hDrqer.js";import{_ as z}from"./BackButton.vue_vue_type_script_setup_true_lang-C--M5_E6.js";import{_ as B}from"./ProgressBar.vue_vue_type_script_setup_true_lang-HVJ__jhq.js";const E={class:"min-h-screen bg-surface-bg text-primary-600 px-6 py-10"},A={class:"mx-auto w-full max-w-3xl space-y-6"},D={class:"flex items-center gap-4"},M={class:"w-full max-w-3xl rounded-400 bg-surface-panel px-8 py-10 shadow-e-200"},j={class:"grid gap-4 md:grid-cols-2"},F={class:"text-left text-sm font-semibold text-primary-600"},L={class:"text-left text-sm font-semibold text-primary-600"},P={class:"block text-left text-sm font-semibold text-primary-600"},R={class:"rounded-300 border border-secondary-300 bg-white p-4 shadow-e-100"},G={class:"block text-left text-sm font-semibold text-primary-600"},O={id:"password-help",class:"mt-3 space-y-1 text-sm"},Z={class:"flex items-start gap-3 rounded-300 bg-secondary-400 px-4 py-3 text-left"},$=["disabled"],J=.25,W=w({__name:"OnboardingLeener",setup(H){const y=T(),g=h();N();const l=_(!1),s=V({firstName:"",lastName:"",email:"",password:"",acceptTerms:!1}),f=b(()=>{const r=s.password;return[{label:"8 caractères minimum",valid:r.length>=8},{label:"1 majuscule",valid:/[A-Z]/.test(r)},{label:"1 minuscule",valid:/[a-z]/.test(r)},{label:"1 chiffre",valid:/\d/.test(r)},{label:"1 caractère spécial",valid:/[^A-Za-z0-9]/.test(r)}]}),d=b(()=>s.firstName.trim().length>0&&s.lastName.trim().length>0&&s.email.trim().length>0&&s.acceptTerms&&f.value.every(r=>r.valid)),v=()=>{if(!d.value||l.value)return;l.value=!0;const r={email:s.email,plainPassword:s.password,firstName:s.firstName,lastName:s.lastName,avatarUrl:"",bio:"",location:"",timezone:"Europe/Paris",locale:"fr"};q(r).then(async t=>{const a=t?.firstName||s.firstName;await g.authenticate({email:s.email,password:s.password}),y.push({name:"theme",state:{firstName:a}})}).catch(t=>{console.error("Registration failed",t)}).finally(()=>{l.value=!1})};return(r,t)=>(p(),u("main",E,[e("div",A,[e("header",D,[x(z),x(B,{value:J})]),e("div",M,[t[10]||(t[10]=e("div",{class:"mb-8 text-center"},[e("h1",{class:"text-3xl font-bold mb-2"},"Bienvenue apprenant !"),e("p",{class:"text-primary-600"},"Crée ton profil pour rejoindre la communauté Leenup.")],-1)),e("form",{class:"space-y-6",onSubmit:C(v,["prevent"])},[e("div",j,[e("label",F,[t[5]||(t[5]=o(" Prénom ",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.firstName=a),type:"text",required:"",class:"mt-1 w-full rounded-300 border border-secondary-300 bg-white px-3 py-2 text-primary-600 shadow-e-100 focus:border-cta-500 focus:outline-none focus:ring-2 focus:ring-cta-200"},null,512),[[n,s.firstName]])]),e("label",L,[t[6]||(t[6]=o(" Nom ",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.lastName=a),type:"text",required:"",class:"mt-1 w-full rounded-300 border border-secondary-300 bg-white px-3 py-2 text-primary-600 shadow-e-100 focus:border-cta-500 focus:outline-none focus:ring-2 focus:ring-cta-200"},null,512),[[n,s.lastName]])])]),e("label",P,[t[7]||(t[7]=o(" Email ",-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.email=a),type:"email",required:"",class:"mt-1 w-full rounded-300 border border-secondary-300 bg-white px-3 py-2 text-primary-600 shadow-e-100 focus:border-cta-500 focus:outline-none focus:ring-2 focus:ring-cta-200"},null,512),[[n,s.email]])]),e("div",R,[e("label",G,[t[8]||(t[8]=o(" Mot de passe ",-1)),i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>s.password=a),type:"password",required:"",class:"mt-1 w-full rounded-300 border border-secondary-300 bg-white px-3 py-2 text-primary-600 focus:border-cta-500 focus:outline-none focus:ring-2 focus:ring-cta-200","aria-describedby":"password-help"},null,512),[[n,s.password]])]),e("ul",O,[(p(!0),u(k,null,S(f.value,a=>(p(),u("li",{key:a.label,class:m(["flex items-center gap-2 transition-all duration-200",a.valid?"text-cta-500":"text-primary-600"])},[e("span",{class:m(["flex h-5 w-5 items-center justify-center rounded-full transition-all duration-200",a.valid?"bg-cta-500 text-surface-button":"bg-secondary-500 text-primary-600"])},c(a.valid?"✓":"•"),3),e("span",null,c(a.label),1)],2))),128))])]),e("div",Z,[i(e("input",{id:"accept-terms","onUpdate:modelValue":t[4]||(t[4]=a=>s.acceptTerms=a),type:"checkbox",class:"mt-1 h-5 w-5 rounded border-primary-300 text-cta-500 focus:ring-cta-200",required:""},null,512),[[U,s.acceptTerms]]),t[9]||(t[9]=e("div",{class:"text-sm text-primary-600"},[o(" J’accepte les "),e("a",{href:"#",class:"underline"},"CGU"),o(", la "),e("a",{href:"#",class:"underline"},"politique de confidentialité"),o(" et les "),e("a",{href:"#",class:"underline"},"CGV"),o(". ")],-1))]),e("button",{type:"submit",class:m(["w-full rounded-400 px-6 py-3 text-base font-semibold text-surface-button shadow-e-300 transition",d.value&&!l.value?"bg-cta-600 hover:bg-primary-700":"bg-secondary-500 text-primary-600 opacity-60 cursor-not-allowed"]),disabled:!d.value||l.value},c(l.value?"Envoi...":"Continuer"),11,$)],32)])])]))}});export{W as default};
